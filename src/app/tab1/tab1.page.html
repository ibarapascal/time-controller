<ion-content [scrollEvents]="true">
  <!-- Summary the css style later -->
  <!-- Achieve first -->
  <table class="table">
    <thead>
      <tr>
        <th style="text-align:center">
          <div id="timeNow" style="font-size: 1.5em;"></div>
        </th>
        <th style="text-align:center">
          <div align="left">
            <button type="button" class="btn btn-primary customLabel"
              style="background-color:gray;"
              (click)="onLabelEdit()">
              <div *ngIf="!labelEditingFlg">Edit</div>
              <div *ngIf="labelEditingFlg">Return</div>
            </button>
          </div>
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td style="border:1px solid; width:66.6%;">
          <!-- Adjust offset value: 2px -->
          <div class="chartDiv"
              [style.height]="lengthRngFull + 2 + 'px'"
              [style.padding-top]="lengthRngPaddingA + 'px'"
              [style.padding-bottom]="lengthRngPaddingA + 'px'">
            <div *ngFor="let item of displayList"
                [style.backgroundColor]="item.color"
                [style.height]="item.length + 'px'">
            </div>
          </div>
          <div class="calibrationDiv">
            <img src="../../assets/img/scaleWithNumber3000-600-625.jpg" alt="scale image" [height]="lengthRngFull">
          </div>
          <div class="dragLabelDiv"
              [style.height]="lengthRngFull + 2 + 'px'"
              [style.padding-top]="lengthRngPaddingB + 'px'"
              [style.padding-bottom]="lengthRngPaddingB + 'px'">
            <input type="range"
                   id="rangeTime"
                   class="range"
                   [style.margin-top]=" propRngStart * lengthRngStandard + 'px'"
                   [min]="propRngStart * lengthRngStandard"
                   [max]="propRngEnd * lengthRngStandard"
                   step="any"
                   [style.height]="(propRngEnd - propRngStart) * lengthRngStandard + lengthRngPaddingB * 2 + 'px'"
                   [(ngModel)]="lengthTimeSetPosition">
            <div class="absoluteDiv"
                id="timeDrag"
                [style.top]="lengthTimeSetPosition + 'px'"
                [style.left]="'-65px'">
            </div>
          </div>
        </td>
  
        <td align="center">
          <div *ngIf="storage.setting.length">
            <div *ngIf="labelEditingFlg" style="margin-bottom:10px">
              <button type="button" class="btn btn-primary customLabel"
                style="background-color:gray;"
                (click)="onLabelDefault()">
                Default
              </button>
            </div>
            <!-- TODO drag and drop -->
            <div *ngFor="let item of storage.setting" style="margin-bottom:10px">
              <button type="button" class="btn btn-primary customLabel"
                [style.background-color]="item.color"
                [style.width]="labelEditingFlg ? '80%' : '100%'"
                (click)="onLabelClick(item.label)">
                {{item.label}}
              </button>
              <button type="button" class="btn btn-sm customX"
                *ngIf="labelEditingFlg"
                (click)="onLabelDelete(item.label)">
                X
              </button>
            </div>
            <div *ngIf="labelEditingFlg">
              <input [style.background]="colorAdded"
                     placeholder="Label Name"
                     [(ngModel)]="labelAdded"
                     style="width: 80%;"
                     (focusout)="onColorPicking($event)">
              <button type="button" class="btn btn-sm customX"
                style="background-color:gray;"
                (click)="onLabelAdd(labelAdded, colorAdded)">
                +
              </button>
            </div>
            <!-- TEST -->
            <div>
              Time now: {{this.ts.getTimestampNow()}}
            </div>
            <div>
              Time drag: {{this.timeSet}} 
            </div>
          </div>
  
          <div *ngIf="!storage.setting.length">
            You can creat your label below.
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  
  <div style="margin-bottom:10px" align="right">
    <button type="button" class="btn btn-primary customLabel"
      style="background-color:black;"
      (click)="onLabelRevert()">Revert</button>
  </div>

</ion-content>

